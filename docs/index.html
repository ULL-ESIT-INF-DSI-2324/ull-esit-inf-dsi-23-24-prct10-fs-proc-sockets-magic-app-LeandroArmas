<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Práctica 10</title><meta name="description" content="Documentation for Práctica 10"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Práctica 10</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>Práctica 10</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-10---aplicación-cliente-servidor-para-coleccionistas-de-cartas-magic" class="tsd-anchor"></a><h1><a href="#md:práctica-10---aplicación-cliente-servidor-para-coleccionistas-de-cartas-magic">Práctica 10 - Aplicación cliente-servidor para coleccionistas de cartas Magic</a></h1><a id="md:leandro-armas" class="tsd-anchor"></a><h1><a href="#md:leandro-armas">Leandro Armas</a></h1><p align="center">
  <a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-LeandroArmas/actions/workflows/node.js.yml">
    <img alt="Tests badge" src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-LeandroArmas/actions/workflows/node.js.yml/badge.svg">
  </a>
  <a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-LeandroArmas/actions/workflows/coveralls.yml">
    <img alt="Coveralls badge" src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-LeandroArmas/actions/workflows/coveralls.yml/badge.svg">
  </a>
  <a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-LeandroArmas">
    <img alt="Sonar badge" src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct10-fs-proc-sockets-magic-app-LeandroArmas&metric=alert_status">
  </a>
</p>

<a id="md:índice" class="tsd-anchor"></a><h2><a href="#md:índice">Índice</a></h2><ul>
<li><a href="#md:introducción">Introducción</a></li>
<li><a href="#md:antes-de-comenzar">Antes de comenzar</a></li>
<li><a href="#md:desarrollo-de-la-aplicación">Desarrollo de la aplicación</a></li>
<li><a href="#md:modificación">Modificación</a></li>
<li><a href="#md:conclusión-y-aprendizajes">Conclusión y Aprendizajes</a></li>
</ul>
<a id="md:introducción" class="tsd-anchor"></a><h2><a href="#md:introducción">Introducción</a></h2><p>En esta práctica, hemos desarrollado una aplicación de gestión de cartas utilizando Node.js y TypeScript. 
La aplicación permite a los usuarios agregar, actualizar, eliminar, listar y mostrar información sobre cartas Magic. 
Además, la comunicación entre el cliente y el servidor se realiza a través de sockets TCP.</p>
<a id="md:antes-de-comenzar" class="tsd-anchor"></a><h2><a href="#md:antes-de-comenzar">Antes de comenzar</a></h2><p>En esta práctica, hermos utilizado varios paquetes de npm para facilitar el desarrollo y las pruebas de nuestra aplicación. A continuación, se detallan los paquetes utilizados y cómo instalarlos:</p>
<p><code>chalk</code>: Este paquete nos permite dar formato al texto en la consola utilizando colores. Lo utilizamos para resaltar la salida de nuestra aplicación.</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">chalk</span>
</code><button>Copy</button></pre>
<p><code>yargs</code>: Yargs nos ayuda a construir interfaces de línea de comandos interactivas al analizar argumentos y opciones. Lo utilizamos para manejar los argumentos de línea de comandos de nuestra aplicación.</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">yargs</span>
</code><button>Copy</button></pre>
<p><code>net</code>: Net es un módulo incorporado en Node.js que proporciona funciones de red. Lo utilizamos para establecer conexiones de socket TCP entre el servidor y los clientes.</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">net</span>
</code><button>Copy</button></pre>
<p><code>mocha y chai</code>: Estos paquetes se utilizan en conjunto para realizar pruebas unitarias en Node.js. Mocha es un marco de pruebas y chai es una biblioteca de aserciones. Los utilizaremos para escribir y ejecutar nuestras pruebas.</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">mocha</span><span class="hl-1"> </span><span class="hl-0">chai</span><span class="hl-1"> --</span><span class="hl-0">save</span><span class="hl-1">-</span><span class="hl-0">dev</span>
</code><button>Copy</button></pre>
<p>Una vez instaladoa estos paquetes, estámos listo para comenzar con el desarrollo de la aplicación y las pruebas.</p>
<a id="md:desarrollo-de-la-aplicación" class="tsd-anchor"></a><h2><a href="#md:desarrollo-de-la-aplicación">Desarrollo de la aplicación</a></h2><p>El proyecto consta de varios archivos y módulos que trabajan juntos para proporcionar la funcionalidad deseada. 
A continuación, se describe detalladamente cada componente del proyecto:</p>
<a id="md:1-cartajs" class="tsd-anchor"></a><h3><a href="#md:1-cartajs">1. <code>carta.js</code></a></h3><p>Este archivo define la clase <code>Carta</code>, que representa una carta de juego con propiedades como ID, nombre, coste de maná, color, tipo, rareza, texto de reglas, valor de mercado, entre otras. </p>
<pre><code class="language-typescript"><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">Carta</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">nombre</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">costeMana</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">color</span><span class="hl-1">: </span><span class="hl-4">Color</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">tipo</span><span class="hl-1">: </span><span class="hl-4">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">rareza</span><span class="hl-1">: </span><span class="hl-4">Rareza</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">textoReglas</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">valorMercado</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">fuerzaResistencia</span><span class="hl-1">?: [</span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-4">number</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-0">marcasLealtad</span><span class="hl-1">?: </span><span class="hl-4">number</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1"> = </span><span class="hl-0">id</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">nombre</span><span class="hl-1"> = </span><span class="hl-0">nombre</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">costeMana</span><span class="hl-1"> = </span><span class="hl-0">costeMana</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">color</span><span class="hl-1"> = </span><span class="hl-0">color</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> = </span><span class="hl-0">tipo</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">rareza</span><span class="hl-1"> = </span><span class="hl-0">rareza</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">textoReglas</span><span class="hl-1"> = </span><span class="hl-0">textoReglas</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">valorMercado</span><span class="hl-1"> = </span><span class="hl-0">valorMercado</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-0">Tipo</span><span class="hl-1">.</span><span class="hl-0">Criatura</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-1"> = </span><span class="hl-0">fuerzaResistencia</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-0">Tipo</span><span class="hl-1">.</span><span class="hl-0">Planeswalker</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">marcasLealtad</span><span class="hl-1"> = </span><span class="hl-0">marcasLealtad</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Además, define enumeraciones para los colores, tipos y rarezas de las cartas.</p>
<pre><code class="language-typescript"><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">enum</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">Blanco</span><span class="hl-1"> = </span><span class="hl-6">&quot;Blanco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Azul</span><span class="hl-1"> = </span><span class="hl-6">&quot;Azul&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Negro</span><span class="hl-1"> = </span><span class="hl-6">&quot;Negro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Rojo</span><span class="hl-1"> = </span><span class="hl-6">&quot;Rojo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Verde</span><span class="hl-1"> = </span><span class="hl-6">&quot;Verde&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Incoloro</span><span class="hl-1"> = </span><span class="hl-6">&quot;Incoloro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Multicolor</span><span class="hl-1"> = </span><span class="hl-6">&quot;Multicolor&quot;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">enum</span><span class="hl-1"> </span><span class="hl-4">Tipo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">Tierra</span><span class="hl-1"> = </span><span class="hl-6">&quot;Tierra&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Criatura</span><span class="hl-1"> = </span><span class="hl-6">&quot;Criatura&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Encantamiento</span><span class="hl-1"> = </span><span class="hl-6">&quot;Encantamiento&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Conjuro</span><span class="hl-1"> = </span><span class="hl-6">&quot;Conjuro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Instantaneo</span><span class="hl-1"> = </span><span class="hl-6">&quot;Instantaneo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Artefacto</span><span class="hl-1"> = </span><span class="hl-6">&quot;Artefacto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Planeswalker</span><span class="hl-1"> = </span><span class="hl-6">&quot;Planeswalker&quot;</span><br/><span class="hl-1">}</span><br/><span class="hl-0">Por</span><span class="hl-1"> </span><span class="hl-0">último</span><span class="hl-1"> </span><span class="hl-0">se</span><span class="hl-1"> </span><span class="hl-0">implementa</span><span class="hl-1"> </span><span class="hl-0">la</span><span class="hl-1"> </span><span class="hl-0">función</span><span class="hl-1"> </span><span class="hl-6">``</span><br/><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">enum</span><span class="hl-1"> </span><span class="hl-4">Rareza</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">Comun</span><span class="hl-1"> = </span><span class="hl-6">&quot;Comun&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Infrecuente</span><span class="hl-1"> = </span><span class="hl-6">&quot;Infrecuente&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Rara</span><span class="hl-1"> = </span><span class="hl-6">&quot;Rara&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Mitica</span><span class="hl-1"> = </span><span class="hl-6">&quot;Mitica&quot;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Por último se implpemengta la función ImprimirConColor que imprime una carta en formato JSON con el correspondiente color.</p>
<pre><code class="language-typescript"><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-7">ImprimirConColor</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">CartaJson</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-0">resultado</span><span class="hl-1"> = </span><span class="hl-6">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`ID: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">id</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Nombre: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">nombre</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Coste de maná: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">costeMana</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Color: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">color</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Linea de tipo: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">tipo</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Rareza: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">rareza</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Texto de reglas: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">textoReglas</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">CartaJson</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-6">&#39;Criatura&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Fuerza/Resistencia: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">CartaJson</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-6">&#39;Planeswalker&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Marcas de lealtad: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">marcasLealtad</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">resultado</span><span class="hl-1"> += </span><span class="hl-6">`Valor de mercado: </span><span class="hl-3">${</span><span class="hl-0">CartaJson</span><span class="hl-8">.</span><span class="hl-0">valorMercado</span><span class="hl-3">}</span><span class="hl-9">\n</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">switch</span><span class="hl-1"> (</span><span class="hl-0">CartaJson</span><span class="hl-1">.</span><span class="hl-0">color</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Blanco&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">white</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Azul&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">blue</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Negro&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">black</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Rojo&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Verde&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">green</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Incoloro&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">gray</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Multicolor&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">magenta</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">default</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">magenta</span><span class="hl-1">(</span><span class="hl-0">resultado</span><span class="hl-1">));</span><br/><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-6">&#39;No se reconoce el color!&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:2-coleccionjs" class="tsd-anchor"></a><h3><a href="#md:2-coleccionjs">2. <code>coleccion.js</code></a></h3><p>En este archivo, se encuentra la clase <code>ColeccionCartas</code>, que representa la colección de cartas de un usuario. 
Esta clase proporciona métodos para agregar, actualizar, eliminar, listar y mostrar información sobre las cartas de la colección.</p>
<pre><code class="language-typescript"><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">ColeccionCartas</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">private</span><span class="hl-1"> </span><span class="hl-0">coleccion</span><span class="hl-1">: </span><span class="hl-4">Carta</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-1">    </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Agrega una nueva carta a la colección.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">carta</span><span class="hl-10"> La carta a agregar.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">usuario</span><span class="hl-10"> El nombre del usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">callback</span><span class="hl-10"> Función de retorno que maneja errores y mensajes de éxito.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-7">agregarCarta</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">: </span><span class="hl-4">Carta</span><span class="hl-1">, </span><span class="hl-0">usuario</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><br/><span class="hl-1">        </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">mensaje</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">DirectorioUsuario</span><span class="hl-1"> = </span><span class="hl-6">`./cartas/</span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">RutaCarta</span><span class="hl-1"> = </span><span class="hl-6">`</span><span class="hl-3">${</span><span class="hl-0">DirectorioUsuario</span><span class="hl-3">}</span><span class="hl-6">/</span><span class="hl-3">${</span><span class="hl-0">carta</span><span class="hl-8">.</span><span class="hl-0">id</span><span class="hl-3">}</span><span class="hl-6">.json`</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-0">DirectorioUsuario</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">mkdirSync</span><span class="hl-1">(</span><span class="hl-0">DirectorioUsuario</span><span class="hl-1">, { </span><span class="hl-0">recursive:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-6">`La carta ya existe en la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">!`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">writeFile</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">, </span><span class="hl-3">null</span><span class="hl-1">, </span><span class="hl-11">2</span><span class="hl-1">), (</span><span class="hl-0">err</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1">.</span><span class="hl-0">message</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">undefined</span><span class="hl-1">, </span><span class="hl-6">`Nueva carta añadida a la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">!`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Actualiza una carta existente en la colección.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">carta</span><span class="hl-10"> La carta actualizada.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">usuario</span><span class="hl-10"> El nombre del usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">callback</span><span class="hl-10"> Función de retorno que maneja errores y mensajes de éxito.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-7">actualizarCarta</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">: </span><span class="hl-4">Carta</span><span class="hl-1">, </span><span class="hl-0">usuario</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><br/><span class="hl-1">        </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">mensaje</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">DirectorioUsuario</span><span class="hl-1"> = </span><span class="hl-6">`./cartas/</span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">RutaCarta</span><span class="hl-1"> = </span><span class="hl-6">`</span><span class="hl-3">${</span><span class="hl-0">DirectorioUsuario</span><span class="hl-3">}</span><span class="hl-6">/</span><span class="hl-3">${</span><span class="hl-0">carta</span><span class="hl-8">.</span><span class="hl-0">id</span><span class="hl-3">}</span><span class="hl-6">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-6">`La carta no existe en la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">!`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">writeFile</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">, </span><span class="hl-3">null</span><span class="hl-1">, </span><span class="hl-11">2</span><span class="hl-1">), (</span><span class="hl-0">err</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1">.</span><span class="hl-0">message</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">undefined</span><span class="hl-1">, </span><span class="hl-6">`Carta actualizada en la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">!`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Elimina una carta de la colección.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">id</span><span class="hl-10"> El ID de la carta a eliminar.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">usuario</span><span class="hl-10"> El nombre del usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">callback</span><span class="hl-10"> Función de retorno que maneja errores y mensajes de éxito.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-7">eliminarCarta</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-0">usuario</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><br/><span class="hl-1">        </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">mensaje</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">DirectorioUsuario</span><span class="hl-1"> = </span><span class="hl-6">`./cartas/</span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">RutaCarta</span><span class="hl-1"> = </span><span class="hl-6">`</span><span class="hl-3">${</span><span class="hl-0">DirectorioUsuario</span><span class="hl-3">}</span><span class="hl-6">/</span><span class="hl-3">${</span><span class="hl-0">id</span><span class="hl-3">}</span><span class="hl-6">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-6">`La carta no existe en la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">!`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">unlink</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">, (</span><span class="hl-0">err</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1">.</span><span class="hl-0">message</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">undefined</span><span class="hl-1">, </span><span class="hl-6">`Carta eliminada de la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">!`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">    </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Lista todas las cartas en la colección de un usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">usuario</span><span class="hl-10"> El nombre del usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">callback</span><span class="hl-10"> Función de retorno que maneja errores y mensajes de éxito.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-7">listarCartas</span><span class="hl-1">(</span><span class="hl-0">usuario</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><br/><span class="hl-1">        </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">mensaje</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">DirectorioUsuario</span><span class="hl-1"> = </span><span class="hl-6">`./cartas/</span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-0">DirectorioUsuario</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6"> no tiene una colección de cartas`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">readdir</span><span class="hl-1">(</span><span class="hl-0">DirectorioUsuario</span><span class="hl-1">, (</span><span class="hl-0">err</span><span class="hl-1">, </span><span class="hl-0">archivos</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1">.</span><span class="hl-0">message</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">coleccion</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">          </span><span class="hl-0">archivos</span><span class="hl-1">.</span><span class="hl-7">forEach</span><span class="hl-1">((</span><span class="hl-0">archivo</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">carta</span><span class="hl-1"> = </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">readFileSync</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-3">${</span><span class="hl-0">DirectorioUsuario</span><span class="hl-3">}</span><span class="hl-6">/</span><span class="hl-3">${</span><span class="hl-0">archivo</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">).</span><span class="hl-7">toString</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-0">coleccion</span><span class="hl-1">.</span><span class="hl-7">push</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">);</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">undefined</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-0">coleccion</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">    </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Muestra la información de una carta específica en la colección de un usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">id</span><span class="hl-10"> El ID de la carta a mostrar.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">usuario</span><span class="hl-10"> El nombre del usuario.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">callback</span><span class="hl-10"> Función de retorno que maneja errores y mensajes de éxito.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">    </span><span class="hl-3">public</span><span class="hl-1"> </span><span class="hl-7">mostrarCarta</span><span class="hl-1">(</span><span class="hl-0">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-0">usuario</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><br/><span class="hl-1">        </span><span class="hl-7">callback</span><span class="hl-1">: (</span><span class="hl-0">error</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-0">mensaje</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">): </span><span class="hl-4">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">DirectorioUsuario</span><span class="hl-1"> = </span><span class="hl-6">`./cartas/</span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">RutaCarta</span><span class="hl-1"> = </span><span class="hl-6">`</span><span class="hl-3">${</span><span class="hl-0">DirectorioUsuario</span><span class="hl-3">}</span><span class="hl-6">/</span><span class="hl-3">${</span><span class="hl-0">id</span><span class="hl-3">}</span><span class="hl-6">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (!</span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-6">`Carta no encontrada en la colección de </span><span class="hl-3">${</span><span class="hl-0">usuario</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">readFile</span><span class="hl-1">(</span><span class="hl-0">RutaCarta</span><span class="hl-1">, (</span><span class="hl-0">err</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">err</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1">.</span><span class="hl-0">message</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-7">callback</span><span class="hl-1">(</span><span class="hl-3">undefined</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">()));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:3-clientejs" class="tsd-anchor"></a><h3><a href="#md:3-clientejs">3. <code>cliente.js</code></a></h3><p>El archivo <code>cliente.js</code> contiene el código del cliente de la aplicación, que se comunica con el servidor a través de sockets TCP. 
Utiliza el módulo <code>yargs</code> para analizar los argumentos de la línea de comandos y ejecutar las operaciones requeridas, como agregar, actualizar, eliminar, listar y mostrar cartas.</p>
<pre><code class="language-typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">cliente</span><span class="hl-1"> = </span><span class="hl-0">net</span><span class="hl-1">.</span><span class="hl-7">connect</span><span class="hl-1">({ </span><span class="hl-0">port:</span><span class="hl-1"> </span><span class="hl-11">60300</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Configuración yargs para el comando &#39;add&#39;.</span><br/><span class="hl-10">   */</span><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1"> = </span><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-0">process</span><span class="hl-1">.</span><span class="hl-0">argv</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;Añade una carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-0">usuario:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre del usuario&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">id:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;ID de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">nombre:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">costeMana:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Coste de maná de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">color:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Color de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">choices:</span><span class="hl-1"> [</span><span class="hl-6">&#39;Blanco&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Azul&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Negro&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Rojo&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Verde&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Incoloro&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Multicolor&#39;</span><span class="hl-1">], </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">tipo:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Tipo de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">choices:</span><span class="hl-1"> [</span><span class="hl-6">&#39;Tierra&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Criatura&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Encantamiento&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Conjuro&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Instantaneo&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Artefacto&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Planeswalker&#39;</span><span class="hl-1">], </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">rareza:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Rareza de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">choices:</span><span class="hl-1"> [</span><span class="hl-6">&#39;Comun&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Infrecuente&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Rara&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Mitica&#39;</span><span class="hl-1">], </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">textoReglas:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Reglas del texto de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">fuerzaResistencia:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Fuerza y resistencia de la carta tipo Criatura&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;array&#39;</span><span class="hl-1">, </span><span class="hl-7">coerce</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">arg</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">arg</span><span class="hl-1">.</span><span class="hl-7">map</span><span class="hl-1">(</span><span class="hl-0">Number</span><span class="hl-1">) },</span><br/><span class="hl-1">        </span><span class="hl-0">marcasLealtad:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Lealtad de la carta tipo Planeswalker&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">valorMercado:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Valor de mercado de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      (</span><span class="hl-0">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-6">&#39;Criatura&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-1"> === </span><span class="hl-3">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-6">&#39;Las criaturas necesitan también un atributo Fuerza/Resistencia&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-6">&#39;Planeswalker&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">marcasLealtad</span><span class="hl-1"> === </span><span class="hl-3">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-6">&#39;Los Planeswalkers necesitan también un atributo Marcas de Lealtad&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">carta</span><span class="hl-1">: </span><span class="hl-4">Carta</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Carta</span><span class="hl-1"> (</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">costeMana</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">color</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-4">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">rareza</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-4">Rareza</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">textoReglas</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">valorMercado</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">marcasLealtad</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">info</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">accion:</span><span class="hl-1"> </span><span class="hl-6">&#39;añadir&#39;</span><span class="hl-1">,  </span><span class="hl-0">carta:</span><span class="hl-1"> </span><span class="hl-0">carta</span><span class="hl-1">, </span><span class="hl-0">usuario:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, </span><span class="hl-0">fin:</span><span class="hl-1"> </span><span class="hl-6">&#39;FIN&#39;</span><span class="hl-1"> });</span><br/><span class="hl-1">        </span><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-0">info</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  .</span><span class="hl-7">help</span><span class="hl-1">().</span><span class="hl-0">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Configuración yargs para el comando &#39;update&#39;.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-0">argv</span><span class="hl-1"> = </span><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-0">process</span><span class="hl-1">.</span><span class="hl-0">argv</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;Actualiza una carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-0">usuario:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre del usuario&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">id:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;ID de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">nombre:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">costeMana:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Coste de maná de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">color:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Color de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">choices:</span><span class="hl-1"> [</span><span class="hl-6">&#39;Blanco&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Azul&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Negro&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Rojo&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Verde&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Incoloro&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Multicolor&#39;</span><span class="hl-1">], </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">tipo:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Tipo de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">choices:</span><span class="hl-1"> [</span><span class="hl-6">&#39;Tierra&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Criatura&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Encantamiento&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Conjuro&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Instantaneo&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Artefacto&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Planeswalker&#39;</span><span class="hl-1">], </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">rareza:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Rareza de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">choices:</span><span class="hl-1"> [</span><span class="hl-6">&#39;Comun&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Infrecuente&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Rara&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Mitica&#39;</span><span class="hl-1">], </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">textoReglas:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Reglas del texto de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">fuerzaResistencia:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Fuerza y resistencia de la carta tipo Criatura&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;array&#39;</span><span class="hl-1">, </span><span class="hl-7">coerce</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">arg</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">arg</span><span class="hl-1">.</span><span class="hl-7">map</span><span class="hl-1">(</span><span class="hl-0">Number</span><span class="hl-1">) },</span><br/><span class="hl-1">        </span><span class="hl-0">marcasLealtad:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Lealtad de la carta tipo Planeswalker&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">valorMercado:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Valor de mercado de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      (</span><span class="hl-0">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-6">&#39;Criatura&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-1"> === </span><span class="hl-3">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-6">&#39;Las criaturas necesitan también un atributo Fuerza/Resistencia&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> === </span><span class="hl-6">&#39;Planeswalker&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">marcasLealtad</span><span class="hl-1"> === </span><span class="hl-3">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">throw</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-6">&#39;Los Planeswalkers necesitan también un atributo Marcas de Lealtad&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">carta</span><span class="hl-1">: </span><span class="hl-4">Carta</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Carta</span><span class="hl-1"> (</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">costeMana</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">color</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-4">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">rareza</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-4">Rareza</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">textoReglas</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">valorMercado</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">marcasLealtad</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">info</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">accion:</span><span class="hl-1"> </span><span class="hl-6">&#39;actualizar&#39;</span><span class="hl-1">,  </span><span class="hl-0">carta:</span><span class="hl-1"> </span><span class="hl-0">carta</span><span class="hl-1">, </span><span class="hl-0">usuario:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, </span><span class="hl-0">fin:</span><span class="hl-1"> </span><span class="hl-6">&#39;FIN&#39;</span><span class="hl-1"> });</span><br/><span class="hl-1">        </span><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-0">info</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  .</span><span class="hl-7">help</span><span class="hl-1">().</span><span class="hl-0">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Configuración yargs para el comando &#39;remove&#39;.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-0">argv</span><span class="hl-1"> = </span><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-0">process</span><span class="hl-1">.</span><span class="hl-0">argv</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;Elimina una carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-0">usuario:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre del usuario&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">id:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;ID de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      (</span><span class="hl-0">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">info</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">accion:</span><span class="hl-1"> </span><span class="hl-6">&#39;eliminar&#39;</span><span class="hl-1">,  </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">usuario:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, </span><span class="hl-0">fin:</span><span class="hl-1"> </span><span class="hl-6">&#39;FIN&#39;</span><span class="hl-1"> });</span><br/><span class="hl-1">        </span><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-0">info</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  .</span><span class="hl-7">help</span><span class="hl-1">().</span><span class="hl-0">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Configuración yargs para el comando &#39;list&#39;.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-0">argv</span><span class="hl-1"> = </span><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-0">process</span><span class="hl-1">.</span><span class="hl-0">argv</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;Lista las cartas de la coleccion&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-0">usuario:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre del usuario&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      (</span><span class="hl-0">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">info</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">accion:</span><span class="hl-1"> </span><span class="hl-6">&#39;listar&#39;</span><span class="hl-1">, </span><span class="hl-0">usuario:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, </span><span class="hl-0">fin:</span><span class="hl-1"> </span><span class="hl-6">&#39;FIN&#39;</span><span class="hl-1"> });</span><br/><span class="hl-1">        </span><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-0">info</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  .</span><span class="hl-7">help</span><span class="hl-1">().</span><span class="hl-0">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Configuración yargs para el comando &#39;show&#39;.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-0">argv</span><span class="hl-1"> = </span><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-0">process</span><span class="hl-1">.</span><span class="hl-0">argv</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-7">command</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;show&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">&#39;Mostrar la info de una carta&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-0">usuario:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;Nombre del usuario&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-0">id:</span><span class="hl-1"> { </span><span class="hl-0">description:</span><span class="hl-1"> </span><span class="hl-6">&#39;ID de la carta&#39;</span><span class="hl-1">, </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;number&#39;</span><span class="hl-1">, </span><span class="hl-0">demandOption:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      (</span><span class="hl-0">argv</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">info</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">accion:</span><span class="hl-1"> </span><span class="hl-6">&#39;mostrar&#39;</span><span class="hl-1">,  </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">usuario:</span><span class="hl-1"> </span><span class="hl-0">argv</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, </span><span class="hl-0">fin:</span><span class="hl-1"> </span><span class="hl-6">&#39;FIN&#39;</span><span class="hl-1"> });</span><br/><span class="hl-1">        </span><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-0">info</span><span class="hl-1">);</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  .</span><span class="hl-7">help</span><span class="hl-1">().</span><span class="hl-0">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-0">wholeData</span><span class="hl-1"> = </span><span class="hl-6">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-0">dataChunk</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">wholeData</span><span class="hl-1"> += </span><span class="hl-0">dataChunk</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Recibido del servidor:</span><span class="hl-9">\n</span><span class="hl-6">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">respuesta</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-0">wholeData</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-0">receivedData</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-2">switch</span><span class="hl-1"> (</span><span class="hl-0">respuesta</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Error&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-0">respuesta</span><span class="hl-1">.</span><span class="hl-0">respuesta</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;Success&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">chalk</span><span class="hl-1">.</span><span class="hl-7">green</span><span class="hl-1">(</span><span class="hl-0">respuesta</span><span class="hl-1">.</span><span class="hl-0">respuesta</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;SuccessCartas&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">receivedData</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-0">respuesta</span><span class="hl-1">.</span><span class="hl-0">respuesta</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">receivedData</span><span class="hl-1">.</span><span class="hl-7">forEach</span><span class="hl-1">((</span><span class="hl-0">carta</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">`--------------------------------`</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-7">ImprimirConColor</span><span class="hl-1">(</span><span class="hl-0">carta</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">`--------------------------------`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;SuccessCarta&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-0">receivedData</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-0">respuesta</span><span class="hl-1">.</span><span class="hl-0">respuesta</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">`--------------------------------`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-7">ImprimirConColor</span><span class="hl-1">(</span><span class="hl-0">receivedData</span><span class="hl-1">.</span><span class="hl-7">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">`--------------------------------`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><span class="hl-1">  </span><br/><span class="hl-0">cliente</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Conexion cerrada&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:4-servidorjs" class="tsd-anchor"></a><h3><a href="#md:4-servidorjs">4. <code>servidor.js</code></a></h3><p>En este archivo, se encuentra la clase <code>eventEmitterSocket</code> define la clase <code>EventEmitterSocket</code>, que extiende la clase <code>EventEmitter</code> y maneja la recepción de datos a través de sockets TCP. Esta clase emite eventos cuando se completa la recepción de datos o se cierra la conexión.Utiliza el módulo <code>events</code> para extender la clase <code>EventEmitter</code> y manejar eventos.</p>
<pre><code class="language-typescript"><span class="hl-10">/**</span><br/><span class="hl-10"> * Clase que extiende EventEmitter para manejar eventos de socket.</span><br/><span class="hl-10"> */</span><br/><span class="hl-2">export</span><span class="hl-1"> </span><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-4">EventEmitterSocket</span><span class="hl-1"> </span><span class="hl-3">extends</span><span class="hl-1"> </span><span class="hl-4">EventEmitter</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-10">/**</span><br/><span class="hl-10">   * Constructor de la clase EventEmitterSocket.</span><br/><span class="hl-10">   * </span><span class="hl-3">@param</span><span class="hl-10"> </span><span class="hl-0">connection</span><span class="hl-10"> La conexión EventEmitter asociada.</span><br/><span class="hl-10">   */</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">(</span><span class="hl-0">connection</span><span class="hl-1">: </span><span class="hl-4">EventEmitter</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-0">wholeData</span><span class="hl-1"> = </span><span class="hl-6">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-0">dataChunk</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">wholeData</span><span class="hl-1"> += </span><span class="hl-0">dataChunk</span><span class="hl-1">;</span><br/><br/><span class="hl-1">      </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">wholeData</span><span class="hl-1">.</span><span class="hl-7">includes</span><span class="hl-1">(</span><span class="hl-6">&#39;FIN&quot;}&#39;</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-7">emit</span><span class="hl-1">(</span><span class="hl-6">&#39;peticion&#39;</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-0">wholeData</span><span class="hl-1">), </span><span class="hl-0">connection</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-7">emit</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>También se encuentra el código del servidor de la aplicación, que espera conexiones de clientes y maneja las solicitudes de operaciones de cartas. 
Utiliza el módulo <code>net</code> para crear un servidor TCP.</p>
<pre><code class="language-typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">coleccion</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">ColeccionCartas</span><span class="hl-1">();</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">server</span><span class="hl-1"> = </span><span class="hl-0">net</span><span class="hl-1">.</span><span class="hl-7">createServer</span><span class="hl-1">((</span><span class="hl-0">connection</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Un cliente se ha conectado.&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">serverSocket</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">EventEmitterSocket</span><span class="hl-1">(</span><span class="hl-0">connection</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">serverSocket</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;peticion&#39;</span><span class="hl-1">, (</span><span class="hl-0">peticion</span><span class="hl-1">, </span><span class="hl-0">connection</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-0">carta</span><span class="hl-1">: </span><span class="hl-4">Carta</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">accion</span><span class="hl-1"> === </span><span class="hl-6">&#39;añadir&#39;</span><span class="hl-1"> || </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">accion</span><span class="hl-1"> === </span><span class="hl-6">&#39;actualizar&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">carta</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-7">Carta</span><span class="hl-1"> (</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">costeMana</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">color</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">tipo</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">rareza</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">textoReglas</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">valorMercado</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">fuerzaResistencia</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">carta</span><span class="hl-1">.</span><span class="hl-0">marcasLealtad</span><span class="hl-1">,</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Solicitud recibida: &#39;</span><span class="hl-1">, </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">accion</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">switch</span><span class="hl-1"> (</span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">accion</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;añadir&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-0">coleccion</span><span class="hl-1">.</span><span class="hl-7">agregarCarta</span><span class="hl-1">( </span><span class="hl-0">carta</span><span class="hl-1">!, </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, (</span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">resultado</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1"> }));</span><br/><span class="hl-1">          } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Success&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">resultado</span><span class="hl-1"> }));</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;actualizar&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-0">coleccion</span><span class="hl-1">.</span><span class="hl-7">actualizarCarta</span><span class="hl-1">( </span><span class="hl-0">carta</span><span class="hl-1">!, </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, (</span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">resultado</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1"> }));</span><br/><span class="hl-1">          } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Success&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">resultado</span><span class="hl-1"> }));</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;eliminar&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-0">coleccion</span><span class="hl-1">.</span><span class="hl-7">eliminarCarta</span><span class="hl-1">(</span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, (</span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">resultado</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1"> }));</span><br/><span class="hl-1">          } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Success&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">resultado</span><span class="hl-1"> }));</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;listar&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-0">coleccion</span><span class="hl-1">.</span><span class="hl-7">listarCartas</span><span class="hl-1">(</span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, (</span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">resultado</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1"> }));</span><br/><span class="hl-1">          } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;SuccessCartas&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">resultado</span><span class="hl-1"> }));</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">case</span><span class="hl-1"> </span><span class="hl-6">&#39;mostrar&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-0">coleccion</span><span class="hl-1">.</span><span class="hl-7">mostrarCarta</span><span class="hl-1">(</span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">peticion</span><span class="hl-1">.</span><span class="hl-0">usuario</span><span class="hl-1">, (</span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">resultado</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">if</span><span class="hl-1"> (</span><span class="hl-0">error</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;Error&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">error</span><span class="hl-1"> }));</span><br/><span class="hl-1">          } </span><span class="hl-2">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">({ </span><span class="hl-0">tipo:</span><span class="hl-1"> </span><span class="hl-6">&#39;SuccessCarta&#39;</span><span class="hl-1">, </span><span class="hl-0">respuesta:</span><span class="hl-1"> </span><span class="hl-0">resultado</span><span class="hl-1"> }));</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><span class="hl-2">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">default</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">write</span><span class="hl-1">(</span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Accion invalida&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-7">end</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-0">serverSocket</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Un cliente se ha desconectado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">server</span><span class="hl-1">.</span><span class="hl-7">listen</span><span class="hl-1">(</span><span class="hl-11">60300</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Esperando que los clientes se conecten.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:modificación" class="tsd-anchor"></a><h2><a href="#md:modificación">Modificación</a></h2><p>En esta sección, se describe la modificación realizada para desarrollar una aplicación cliente-servidor que proporcione información sobre el número de líneas, palabras o caracteres que contiene un fichero de texto. La ruta donde se encuentra el fichero es un parámetro pasado al cliente desde la línea de comandos.</p>
<a id="md:descripción-de-la-modificación" class="tsd-anchor"></a><h3><a href="#md:descripción-de-la-modificación">Descripción de la Modificación</a></h3><p>Para llevar a cabo esta modificación, se implementó una aplicación cliente-servidor utilizando Node.js y el módulo <code>net</code> para la comunicación entre ellos a través de sockets TCP. La funcionalidad de la aplicación se basa en dos enfoques diferentes:</p>
<ol>
<li><p><strong>Uso del Método Pipe de un Stream</strong>: Este enfoque implica redirigir la salida de un comando (como <code>cat</code>) hacia otro (como <code>wc</code>). Se utilizó el método <code>child_process.spawn()</code> para ejecutar los comandos de forma independiente y se estableció una tubería (<code>pipe</code>) entre ellos para transmitir los datos de salida del primer comando como entrada al segundo.</p>
</li>
<li><p><strong>Creación de Subprocesos sin Uso del Método Pipe</strong>: En este enfoque, se crean los subprocesos necesarios para ambos comandos (como <code>cat</code> y <code>wc</code>) utilizando <code>child_process.spawn()</code>. Luego, se registraron manejadores de eventos para capturar los datos de salida de <code>cat</code> y enviarlos como entrada a <code>wc</code>. Esta opción proporciona un mayor control sobre la comunicación entre los procesos.</p>
</li>
</ol>
<a id="md:procesamiento-defensivo" class="tsd-anchor"></a><h3><a href="#md:procesamiento-defensivo">Procesamiento Defensivo</a></h3><p>Para garantizar un comportamiento robusto y prevenir posibles errores, se implementaron controles defensivos en la aplicación:</p>
<ul>
<li>Se verificó si la ruta del fichero proporcionada desde la línea de comandos existe y es válida antes de intentar acceder al contenido del fichero.</li>
<li>Se manejaron los casos de errores potenciales, como ficheros no encontrados o opciones inválidas, mostrando mensajes informativos al usuario y finalizando adecuadamente la ejecución de la aplicación.</li>
</ul>
<a id="md:enlace-al-repositorio-github" class="tsd-anchor"></a><h3><a href="#md:enlace-al-repositorio-github">Enlace al Repositorio GitHub</a></h3><p>La implementación de esta modificación se encuentra disponible en el siguiente repositorio GitHub: <a href="https://github.com/LeandroArmas/p10_LeandroArmas_PE101">p10_LeandroArmas_PE101</a></p>
<p>Esta modificación permite a los usuarios obtener información sobre la cantidad de líneas, palabras y caracteres en un fichero de texto de manera eficiente y segura, utilizando una aplicación cliente-servidor desarrollada en Node.js.</p>
<a id="md:conclusión-y-aprendizajes" class="tsd-anchor"></a><h2><a href="#md:conclusión-y-aprendizajes">Conclusión y Aprendizajes</a></h2><p>Durante el desarrollo de esta práctica, se ha adquirido una comprensión más profunda de la programación en Node.js y TypeScript, así como de los conceptos fundamentales de comunicación entre procesos a través de sockets TCP. Algunos de los aspectos destacados y aprendizajes clave de esta experiencia incluyen:</p>
<a id="md:dominio-de-nodejs-y-typescript" class="tsd-anchor"></a><h3><a href="#md:dominio-de-nodejs-y-typescript">Dominio de Node.js y TypeScript</a></h3><p>Al trabajar en esta práctica, se ha consolidado el conocimiento sobre el entorno de ejecución de Node.js y cómo se puede utilizar para crear aplicaciones del lado del servidor de alto rendimiento. Además, se ha profundizado en el uso de TypeScript para agregar tipado estático a nuestro código, lo que ha facilitado la detección de errores y la escritura de código más robusto y mantenible.</p>
<a id="md:comunicación-cliente-servidor" class="tsd-anchor"></a><h3><a href="#md:comunicación-cliente-servidor">Comunicación Cliente-Servidor</a></h3><p>La implementación de la comunicación entre cliente y servidor a través de sockets TCP ha proporcionado una comprensión más sólida de cómo se establece y gestiona la comunicación entre procesos en entornos distribuidos. Esto ha implicado aprender a configurar y administrar conexiones TCP, así como a manejar eventos y datos transmitidos entre el cliente y el servidor de manera eficiente.</p>
<a id="md:manejo-de-eventos-y-asincronía" class="tsd-anchor"></a><h3><a href="#md:manejo-de-eventos-y-asincronía">Manejo de Eventos y Asincronía</a></h3><p>Se ha mejorado la habilidad para trabajar con eventos y callbacks en entornos asincrónicos, lo que ha sido fundamental para garantizar un flujo de ejecución fluido y eficiente en la aplicación. El uso de eventos ha permitido gestionar de manera efectiva la llegada de datos del cliente al servidor y viceversa, así como responder a ellos de manera apropiada.</p>
<a id="md:pruebas-y-depuración" class="tsd-anchor"></a><h3><a href="#md:pruebas-y-depuración">Pruebas y Depuración</a></h3><p>La práctica también ha brindado la oportunidad de profundizar en las técnicas de prueba y depuración de aplicaciones en Node.js. Se ha aprendido a escribir pruebas unitarias con Mocha y Chai para verificar el comportamiento esperado de las funciones, así como a utilizar herramientas de depuración para identificar y corregir errores en el código.</p>
<a id="md:desarrollo-defensivo-y-control-de-errores" class="tsd-anchor"></a><h3><a href="#md:desarrollo-defensivo-y-control-de-errores">Desarrollo Defensivo y Control de Errores</a></h3><p>Se ha enfatizado la importancia del desarrollo defensivo y el manejo adecuado de errores en la construcción de aplicaciones robustas y confiables. Se han implementado controles defensivos para validar entradas de usuario, manejar casos de error y garantizar un comportamiento predecible y seguro en la aplicación.</p>
<p>En resumen, esta práctica ha sido una oportunidad valiosa para aplicar y reforzar los conocimientos adquiridos en el desarrollo de aplicaciones web con Node.js y TypeScript, así como para adquirir nuevas habilidades en el manejo de comunicaciones entre procesos y el desarrollo defensivo de software. Estos aprendizajes serán de gran utilidad en futuros proyectos y en el desarrollo de aplicaciones más complejas en el futuro.</p>
<a id="md:referencias" class="tsd-anchor"></a><h2><a href="#md:referencias">Referencias</a></h2><ul>
<li><a href="https://nodejs.org/docs/latest/api/events.html">Documentación de events</a></li>
<li><a href="https://nodejs.org/docs/latest/api/fs.html">Documentación de fs</a></li>
<li><a href="https://nodejs.org/docs/latest/api/net.html">Documentación de net</a></li>
<li><a href="https://www.npmjs.com/package/yargs">Documentación de yargs</a></li>
<li><a href="https://www.npmjs.com/package/chalk">Documentación de chalk</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><ul><li><ul><li><a href="#md:práctica-10---aplicación-cliente-servidor-para-coleccionistas-de-cartas-magic"><span>Práctica 10 -<wbr/> <wbr/>Aplicación cliente-<wbr/>servidor para coleccionistas de cartas <wbr/>Magic</span></a></li><li><a href="#md:leandro-armas"><span>Leandro <wbr/>Armas</span></a></li><li><ul><li><a href="#md:índice"><span>Índice</span></a></li><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:antes-de-comenzar"><span>Antes de comenzar</span></a></li><li><a href="#md:desarrollo-de-la-aplicación"><span>Desarrollo de la aplicación</span></a></li><li><ul><li><a href="#md:1-cartajs"><span>1. carta.js</span></a></li><li><a href="#md:2-coleccionjs"><span>2. coleccion.js</span></a></li><li><a href="#md:3-clientejs"><span>3. cliente.js</span></a></li><li><a href="#md:4-servidorjs"><span>4. servidor.js</span></a></li></ul></li><li><a href="#md:modificación"><span>Modificación</span></a></li><li><ul><li><a href="#md:descripción-de-la-modificación"><span>Descripción de la <wbr/>Modificación</span></a></li><li><a href="#md:procesamiento-defensivo"><span>Procesamiento <wbr/>Defensivo</span></a></li><li><a href="#md:enlace-al-repositorio-github"><span>Enlace al <wbr/>Repositorio <wbr/>Git<wbr/>Hub</span></a></li></ul></li><li><a href="#md:conclusión-y-aprendizajes"><span>Conclusión y <wbr/>Aprendizajes</span></a></li><li><ul><li><a href="#md:dominio-de-nodejs-y-typescript"><span>Dominio de <wbr/>Node.js y <wbr/>Type<wbr/>Script</span></a></li><li><a href="#md:comunicación-cliente-servidor"><span>Comunicación <wbr/>Cliente-<wbr/>Servidor</span></a></li><li><a href="#md:manejo-de-eventos-y-asincronía"><span>Manejo de <wbr/>Eventos y <wbr/>Asincronía</span></a></li><li><a href="#md:pruebas-y-depuración"><span>Pruebas y <wbr/>Depuración</span></a></li><li><a href="#md:desarrollo-defensivo-y-control-de-errores"><span>Desarrollo <wbr/>Defensivo y <wbr/>Control de <wbr/>Errores</span></a></li></ul></li><li><a href="#md:referencias"><span>Referencias</span></a></li></ul></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-1"></use></svg><span>Práctica 10</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li><a href="modules/carta.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-2"></use></svg>carta</a></li><li><a href="modules/cliente.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-2"></use></svg>cliente</a></li><li><a href="modules/coleccion.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-2"></use></svg>coleccion</a></li><li><a href="modules/servidor.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-2"></use></svg>servidor</a></li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><svg style="display: none"><g id="icon-1"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-module)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.162 16V7.24H10.578L11.514 10.072C11.602 10.328 11.674 10.584 11.73 10.84C11.794 11.088 11.842 11.28 11.874 11.416C11.906 11.28 11.954 11.088 12.018 10.84C12.082 10.584 12.154 10.324 12.234 10.06L13.122 7.24H14.538V16H13.482V12.82C13.482 12.468 13.49 12.068 13.506 11.62C13.53 11.172 13.558 10.716 13.59 10.252C13.622 9.78 13.654 9.332 13.686 8.908C13.726 8.476 13.762 8.1 13.794 7.78L12.366 12.16H11.334L9.894 7.78C9.934 8.092 9.97 8.456 10.002 8.872C10.042 9.28 10.078 9.716 10.11 10.18C10.142 10.636 10.166 11.092 10.182 11.548C10.206 12.004 10.218 12.428 10.218 12.82V16H9.162Z" fill="var(--color-text)"></path></g><g id="icon-2"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-module)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.162 16V7.24H10.578L11.514 10.072C11.602 10.328 11.674 10.584 11.73 10.84C11.794 11.088 11.842 11.28 11.874 11.416C11.906 11.28 11.954 11.088 12.018 10.84C12.082 10.584 12.154 10.324 12.234 10.06L13.122 7.24H14.538V16H13.482V12.82C13.482 12.468 13.49 12.068 13.506 11.62C13.53 11.172 13.558 10.716 13.59 10.252C13.622 9.78 13.654 9.332 13.686 8.908C13.726 8.476 13.762 8.1 13.794 7.78L12.366 12.16H11.334L9.894 7.78C9.934 8.092 9.97 8.456 10.002 8.872C10.042 9.28 10.078 9.716 10.11 10.18C10.142 10.636 10.166 11.092 10.182 11.548C10.206 12.004 10.218 12.428 10.218 12.82V16H9.162Z" fill="var(--color-text)"></path></g><g id="icon-4"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-namespace)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.33 16V7.24H10.77L13.446 14.74C13.43 14.54 13.41 14.296 13.386 14.008C13.37 13.712 13.354 13.404 13.338 13.084C13.33 12.756 13.326 12.448 13.326 12.16V7.24H14.37V16H12.93L10.266 8.5C10.282 8.692 10.298 8.936 10.314 9.232C10.33 9.52 10.342 9.828 10.35 10.156C10.366 10.476 10.374 10.784 10.374 11.08V16H9.33Z" fill="var(--color-text)"></path></g><g id="icon-8"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-enum)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.45 16V7.24H14.49V8.224H10.518V10.936H14.07V11.908H10.518V15.016H14.49V16H9.45Z" fill="var(--color-text)"></path></g><g id="icon-16"><rect fill="var(--color-icon-background)" stroke="#FF984D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M9.354 16V7.24H12.174C12.99 7.24 13.638 7.476 14.118 7.948C14.606 8.412 14.85 9.036 14.85 9.82C14.85 10.604 14.606 11.232 14.118 11.704C13.638 12.168 12.99 12.4 12.174 12.4H10.434V16H9.354ZM10.434 11.428H12.174C12.646 11.428 13.022 11.284 13.302 10.996C13.59 10.7 13.734 10.308 13.734 9.82C13.734 9.324 13.59 8.932 13.302 8.644C13.022 8.356 12.646 8.212 12.174 8.212H10.434V11.428Z" fill="var(--color-text)"></path></g><g id="icon-32"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-variable)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.106 16L8.85 7.24H9.966L11.454 13.192C11.558 13.608 11.646 13.996 11.718 14.356C11.79 14.708 11.842 14.976 11.874 15.16C11.906 14.976 11.954 14.708 12.018 14.356C12.09 13.996 12.178 13.608 12.282 13.192L13.758 7.24H14.85L12.582 16H11.106Z" fill="var(--color-text)"></path></g><g id="icon-64"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-function)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.39 16V7.24H14.55V8.224H10.446V11.128H14.238V12.112H10.47V16H9.39Z" fill="var(--color-text)"></path></g><g id="icon-128"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-class)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.898 16.1201C11.098 16.1201 10.466 15.8961 10.002 15.4481C9.53803 15.0001 9.30603 14.3841 9.30603 13.6001V9.64012C9.30603 8.85612 9.53803 8.24012 10.002 7.79212C10.466 7.34412 11.098 7.12012 11.898 7.12012C12.682 7.12012 13.306 7.34812 13.77 7.80412C14.234 8.25212 14.466 8.86412 14.466 9.64012H13.386C13.386 9.14412 13.254 8.76412 12.99 8.50012C12.734 8.22812 12.37 8.09212 11.898 8.09212C11.426 8.09212 11.054 8.22412 10.782 8.48812C10.518 8.75212 10.386 9.13212 10.386 9.62812V13.6001C10.386 14.0961 10.518 14.4801 10.782 14.7521C11.054 15.0161 11.426 15.1481 11.898 15.1481C12.37 15.1481 12.734 15.0161 12.99 14.7521C13.254 14.4801 13.386 14.0961 13.386 13.6001H14.466C14.466 14.3761 14.234 14.9921 13.77 15.4481C13.306 15.8961 12.682 16.1201 11.898 16.1201Z" fill="var(--color-text)"></path></g><g id="icon-256"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-interface)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.51 16V15.016H11.298V8.224H9.51V7.24H14.19V8.224H12.402V15.016H14.19V16H9.51Z" fill="var(--color-text)"></path></g><g id="icon-512"><rect fill="var(--color-icon-background)" stroke="#4D7FFF" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M11.898 16.1201C11.098 16.1201 10.466 15.8961 10.002 15.4481C9.53803 15.0001 9.30603 14.3841 9.30603 13.6001V9.64012C9.30603 8.85612 9.53803 8.24012 10.002 7.79212C10.466 7.34412 11.098 7.12012 11.898 7.12012C12.682 7.12012 13.306 7.34812 13.77 7.80412C14.234 8.25212 14.466 8.86412 14.466 9.64012H13.386C13.386 9.14412 13.254 8.76412 12.99 8.50012C12.734 8.22812 12.37 8.09212 11.898 8.09212C11.426 8.09212 11.054 8.22412 10.782 8.48812C10.518 8.75212 10.386 9.13212 10.386 9.62812V13.6001C10.386 14.0961 10.518 14.4801 10.782 14.7521C11.054 15.0161 11.426 15.1481 11.898 15.1481C12.37 15.1481 12.734 15.0161 12.99 14.7521C13.254 14.4801 13.386 14.0961 13.386 13.6001H14.466C14.466 14.3761 14.234 14.9921 13.77 15.4481C13.306 15.8961 12.682 16.1201 11.898 16.1201Z" fill="var(--color-text)"></path></g><g id="icon-1024"><rect fill="var(--color-icon-background)" stroke="#FF984D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M9.354 16V7.24H12.174C12.99 7.24 13.638 7.476 14.118 7.948C14.606 8.412 14.85 9.036 14.85 9.82C14.85 10.604 14.606 11.232 14.118 11.704C13.638 12.168 12.99 12.4 12.174 12.4H10.434V16H9.354ZM10.434 11.428H12.174C12.646 11.428 13.022 11.284 13.302 10.996C13.59 10.7 13.734 10.308 13.734 9.82C13.734 9.324 13.59 8.932 13.302 8.644C13.022 8.356 12.646 8.212 12.174 8.212H10.434V11.428Z" fill="var(--color-text)"></path></g><g id="icon-2048"><rect fill="var(--color-icon-background)" stroke="#FF4DB8" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M9.162 16V7.24H10.578L11.514 10.072C11.602 10.328 11.674 10.584 11.73 10.84C11.794 11.088 11.842 11.28 11.874 11.416C11.906 11.28 11.954 11.088 12.018 10.84C12.082 10.584 12.154 10.324 12.234 10.06L13.122 7.24H14.538V16H13.482V12.82C13.482 12.468 13.49 12.068 13.506 11.62C13.53 11.172 13.558 10.716 13.59 10.252C13.622 9.78 13.654 9.332 13.686 8.908C13.726 8.476 13.762 8.1 13.794 7.78L12.366 12.16H11.334L9.894 7.78C9.934 8.092 9.97 8.456 10.002 8.872C10.042 9.28 10.078 9.716 10.11 10.18C10.142 10.636 10.166 11.092 10.182 11.548C10.206 12.004 10.218 12.428 10.218 12.82V16H9.162Z" fill="var(--color-text)"></path></g><g id="icon-4096"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-function)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.39 16V7.24H14.55V8.224H10.446V11.128H14.238V12.112H10.47V16H9.39Z" fill="var(--color-text)"></path></g><g id="icon-8192"><rect fill="var(--color-icon-background)" stroke="#FF984D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M9.354 16V7.24H12.174C12.99 7.24 13.638 7.476 14.118 7.948C14.606 8.412 14.85 9.036 14.85 9.82C14.85 10.604 14.606 11.232 14.118 11.704C13.638 12.168 12.99 12.4 12.174 12.4H10.434V16H9.354ZM10.434 11.428H12.174C12.646 11.428 13.022 11.284 13.302 10.996C13.59 10.7 13.734 10.308 13.734 9.82C13.734 9.324 13.59 8.932 13.302 8.644C13.022 8.356 12.646 8.212 12.174 8.212H10.434V11.428Z" fill="var(--color-text)"></path></g><g id="icon-16384"><rect fill="var(--color-icon-background)" stroke="#4D7FFF" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M11.898 16.1201C11.098 16.1201 10.466 15.8961 10.002 15.4481C9.53803 15.0001 9.30603 14.3841 9.30603 13.6001V9.64012C9.30603 8.85612 9.53803 8.24012 10.002 7.79212C10.466 7.34412 11.098 7.12012 11.898 7.12012C12.682 7.12012 13.306 7.34812 13.77 7.80412C14.234 8.25212 14.466 8.86412 14.466 9.64012H13.386C13.386 9.14412 13.254 8.76412 12.99 8.50012C12.734 8.22812 12.37 8.09212 11.898 8.09212C11.426 8.09212 11.054 8.22412 10.782 8.48812C10.518 8.75212 10.386 9.13212 10.386 9.62812V13.6001C10.386 14.0961 10.518 14.4801 10.782 14.7521C11.054 15.0161 11.426 15.1481 11.898 15.1481C12.37 15.1481 12.734 15.0161 12.99 14.7521C13.254 14.4801 13.386 14.0961 13.386 13.6001H14.466C14.466 14.3761 14.234 14.9921 13.77 15.4481C13.306 15.8961 12.682 16.1201 11.898 16.1201Z" fill="var(--color-text)"></path></g><g id="icon-32768"><rect fill="var(--color-icon-background)" stroke="#FF984D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M9.354 16V7.24H12.174C12.99 7.24 13.638 7.476 14.118 7.948C14.606 8.412 14.85 9.036 14.85 9.82C14.85 10.604 14.606 11.232 14.118 11.704C13.638 12.168 12.99 12.4 12.174 12.4H10.434V16H9.354ZM10.434 11.428H12.174C12.646 11.428 13.022 11.284 13.302 10.996C13.59 10.7 13.734 10.308 13.734 9.82C13.734 9.324 13.59 8.932 13.302 8.644C13.022 8.356 12.646 8.212 12.174 8.212H10.434V11.428Z" fill="var(--color-text)"></path></g><g id="icon-65536"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-type-alias)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)"></path></g><g id="icon-131072"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-type-alias)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)"></path></g><g id="icon-262144"><rect fill="var(--color-icon-background)" stroke="#FF4D4D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M8.85 16L11.13 7.24H12.582L14.85 16H13.758L13.182 13.672H10.53L9.954 16H8.85ZM10.746 12.76H12.954L12.282 10.06C12.154 9.548 12.054 9.12 11.982 8.776C11.91 8.432 11.866 8.208 11.85 8.104C11.834 8.208 11.79 8.432 11.718 8.776C11.646 9.12 11.546 9.544 11.418 10.048L10.746 12.76Z" fill="var(--color-text)"></path></g><g id="icon-524288"><rect fill="var(--color-icon-background)" stroke="#FF4D4D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M8.85 16L11.13 7.24H12.582L14.85 16H13.758L13.182 13.672H10.53L9.954 16H8.85ZM10.746 12.76H12.954L12.282 10.06C12.154 9.548 12.054 9.12 11.982 8.776C11.91 8.432 11.866 8.208 11.85 8.104C11.834 8.208 11.79 8.432 11.718 8.776C11.646 9.12 11.546 9.544 11.418 10.048L10.746 12.76Z" fill="var(--color-text)"></path></g><g id="icon-1048576"><rect fill="var(--color-icon-background)" stroke="#FF4D4D" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M8.85 16L11.13 7.24H12.582L14.85 16H13.758L13.182 13.672H10.53L9.954 16H8.85ZM10.746 12.76H12.954L12.282 10.06C12.154 9.548 12.054 9.12 11.982 8.776C11.91 8.432 11.866 8.208 11.85 8.104C11.834 8.208 11.79 8.432 11.718 8.776C11.646 9.12 11.546 9.544 11.418 10.048L10.746 12.76Z" fill="var(--color-text)"></path></g><g id="icon-2097152"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-type-alias)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)"></path></g><g id="icon-4194304"><rect fill="var(--color-icon-background)" stroke="#FF4D82" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="12"></rect><path d="M10.354 17V8.24H13.066C13.586 8.24 14.042 8.348 14.434 8.564C14.826 8.772 15.13 9.064 15.346 9.44C15.562 9.816 15.67 10.256 15.67 10.76C15.67 11.352 15.514 11.86 15.202 12.284C14.898 12.708 14.482 13 13.954 13.16L15.79 17H14.518L12.838 13.28H11.434V17H10.354ZM11.434 12.308H13.066C13.514 12.308 13.874 12.168 14.146 11.888C14.418 11.6 14.554 11.224 14.554 10.76C14.554 10.288 14.418 9.912 14.146 9.632C13.874 9.352 13.514 9.212 13.066 9.212H11.434V12.308Z" fill="var(--color-text)"></path></g><g id="icon-chevronDown"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></g><g id="icon-chevronSmall"><path d="M1.5 5.50969L8 11.6609L14.5 5.50969L12.5466 3.66086L8 7.96494L3.45341 3.66086L1.5 5.50969Z" fill="var(--color-text)"></path></g><g id="icon-menu"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></g><g id="icon-search"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></g><g id="icon-anchor"><g stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></g></g></svg></body></html>